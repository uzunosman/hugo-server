<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hugo Oyunu</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/8.0.0/signalr.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        .section {
            margin-bottom: 20px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        input {
            padding: 5px;
            margin: 5px;
            border: 1px solid #ccc;
            border-radius: 3px;
        }

        button {
            padding: 5px 10px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 3px;
            cursor: pointer;
        }

        button:hover {
            background-color: #0056b3;
        }

        #log {
            background-color: #f8f9fa;
            padding: 10px;
            border-radius: 3px;
            font-family: monospace;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="section">
            <h2>Oyun Oluştur</h2>
            <input type="text" id="playerName" placeholder="Oyuncu Adı">
            <button onclick="createGame()">Oyun Oluştur</button>
        </div>

        <div class="section">
            <h2>Oyuna Katıl</h2>
            <input type="text" id="gameId" placeholder="Oyun ID">
            <input type="text" id="joinPlayerName" placeholder="Oyuncu Adı">
            <button onclick="joinGame()">Oyuna Katıl</button>
        </div>

        <div class="section">
            <h2>Oyun Durumu</h2>
            <pre id="gameState"></pre>
        </div>

        <div class="section">
            <h2>Log</h2>
            <pre id="log"></pre>
        </div>
    </div>

    <script>
        const connection = new signalR.HubConnectionBuilder()
            .withUrl("/gameHub")
            .build();

        connection.on("GameCreated", (gameId) => {
            log(`Oyun oluşturuldu. ID: ${gameId}`);
        });

        connection.on("PlayerJoined", (player) => {
            log(`Oyuncu katıldı: ${player.name}`);
        });

        connection.on("Error", (message) => {
            log(`Hata: ${message}`);
        });

        connection.on("GameStateUpdated", (state) => {
            document.getElementById("gameState").textContent = JSON.stringify(state, null, 2);
        });

        async function createGame() {
            const playerName = document.getElementById("playerName").value;
            try {
                await connection.invoke("CreateGame", playerName);
            } catch (err) {
                log(err);
            }
        }

        async function joinGame() {
            const gameId = document.getElementById("gameId").value;
            const playerName = document.getElementById("joinPlayerName").value;
            try {
                await connection.invoke("JoinGame", gameId, playerName);
            } catch (err) {
                log(err);
            }
        }

        function log(message) {
            const logElement = document.getElementById("log");
            logElement.textContent = new Date().toLocaleTimeString('tr-TR') + ": " + message + "\n" + logElement.textContent;
        }

        connection.start()
            .then(() => log("Bağlantı kuruldu"))
            .catch(err => log(err));
    </script>
</body>

</html>